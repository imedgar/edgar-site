<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Edgar G. Rubio - Backend Developer" />
    
    <link rel="stylesheet" type="text/css" href="style.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <title>Edgar G. Rubio</title>
  </head>

  <body>
    <div class="container">
      <header class="header">
        <div class="social-links">
          <a href="https://github.com/imedgar" target="_blank">
            <i class="fab fa-github"></i>
          </a>
          <a href="https://www.linkedin.com/in/edgar-garcia-rubio/" target="_blank">
            <i class="fab fa-linkedin"></i>
          </a>
          <a href="mailto:edgaru90@gmail.com">
            <i class="fas fa-envelope"></i>
          </a>
        </div>
      </header>

      <main class="main">
        <div class="profile-column">
          <div class="profile-content">
            <p class="greeting">Hey, I'm Edgar</p>
            <div class="profile-header">
              <div class="profile-text">
                <h2>Backend Developer</h2>
              </div>
              <img src="https://xdtfrabhpimnmiilhcur.supabase.co/storage/v1/object/public/personal-site//pic.JPG" alt="Legolas & Edgar" class="profile-image">
            </div>
            <p>I enjoy solving real problems and building useful things with others. I'm especially motivated by tough challenges, performance optimization, and figuring out how to make systems work better.</p>
            <p>I focus on event-driven architectures, distributed systems, and developer tooling. Always exploring new technologies to keep things interesting.</p>
            
            <div class="profile-buttons">
              <a href="mailto:edgaru90@gmail.com" class="btn-primary">Get in touch</a>
            </div>
          </div>
        </div>

        <div class="projects-column">
          <section class="latest-projects">
            <h3>Things I've built</h3>
            <div class="projects-grid">
                <div class="project-box">
                  <div class="project-header">
                    <h4><a href="https://github.com/imedgar/nanoleaf-go" target="_blank">Nanoleaf Go</a></h4>
                    <a href="https://github.com/imedgar/nanoleaf-go" target="_blank" class="github-icon">
                      <i class="fab fa-github"></i>
                    </a>
                  </div>
                  <p>Go library for controlling Nanoleaf smart lights with API integration.</p>
                  <div class="project-tech">Go, API</div>
                </div>

                <div class="project-box">
                  <div class="project-header">
                    <h4>GitHub Actions TUI</h4>
                    <span class="github-icon placeholder">
                      <i class="fab fa-github"></i>
                    </span>
                  </div>
                  <p>Terminal interface for monitoring GitHub Actions (WIP).</p>
                  <div class="project-tech">Go, Terminal UI</div>
                </div>

                <div class="project-box">
                  <div class="project-header">
                    <h4><a href="https://github.com/imedgar/rain-alert" target="_blank">Rain Alert</a></h4>
                    <a href="https://github.com/imedgar/rain-alert" target="_blank" class="github-icon">
                      <i class="fab fa-github"></i>
                    </a>
                  </div>
                  <p>Go service that sends weather notifications to your phone.</p>
                  <div class="project-tech">Go, Docker</div>
                </div>

                <div class="project-box">
                  <div class="project-header">
                    <h4><a href="https://github.com/imedgar/wordlemeaning" target="_blank">Wordle Meaning</a></h4>
                    <a href="https://github.com/imedgar/wordlemeaning" target="_blank" class="github-icon">
                      <i class="fab fa-github"></i>
                    </a>
                  </div>
                  <p>Chrome extension that looks up Wordle word definitions.</p>
                  <div class="project-tech">JavaScript</div>
                </div>
              </div>
            </section>

          </section>
        </div>

        <div class="technologies-column">
          <section class="blog-posts">
            <h3>Latest Blog Posts</h3>
            <div id="blog-container" class="blog-container">
              <div class="loading">Loading blog posts...</div>
            </div>
            </section>
          </div>
        </div>
      </main>

      <footer class="footer">
        <p>© 2025 • HTML + CSS</p>
      </footer>
    </div>
    
    <script>
      async function fetchHashnodePosts() {
        const query = `
          query Publication {
            publication(host: "imedgar.hashnode.dev") {
              posts(first: 3) {
                edges {
                  node {
                    title
                    brief
                    slug
                    publishedAt
                    url
                  }
                }
              }
            }
          }
        `;

        try {
          const response = await fetch('https://gql.hashnode.com', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({
              query: query
            })
          });

          const data = await response.json();
          return data.data.publication.posts.edges.map(edge => edge.node);
        } catch (error) {
          console.error('Error fetching blog posts:', error);
          return [];
        }
      }

      function formatDate(dateString) {
        const options = { year: 'numeric', month: 'short', day: 'numeric' };
        return new Date(dateString).toLocaleDateString('en-US', options);
      }

      async function displayBlogPosts() {
        const container = document.getElementById('blog-container');
        const posts = await fetchHashnodePosts();

        if (posts.length === 0) {
          container.innerHTML = '<div class="error">Unable to load blog posts</div>';
          return;
        }

        const postsHTML = posts.map(post => `
          <div class="blog-post">
            <div class="blog-post-header">
              <h4><a href="${post.url}" target="_blank">${post.title}</a></h4>
              <span class="blog-date">${formatDate(post.publishedAt)}</span>
            </div>
            <p class="blog-brief">${post.brief}</p>
          </div>
        `).join('');

        container.innerHTML = postsHTML;
      }

      // Load blog posts when page loads
      document.addEventListener('DOMContentLoaded', displayBlogPosts);
    </script>
  </body>
</html>
